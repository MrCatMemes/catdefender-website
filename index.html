<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>BroMessenger Web</title>
    <style>
        body { background: #23272a; color: #fff; font-family: sans-serif; }
        #chat { width: 100%; height: 300px; background: #2c2f33; margin-bottom: 10px; border-radius: 10px; padding: 10px; overflow-y: auto;}
        input, button { padding: 10px; border-radius: 7px; border: none; margin: 2px;}
        button { background: #7289da; color: #fff; }
    </style>
</head>
<body>
    <h2>BroMessenger Web</h2>
    <input id="name" placeholder="Name">
    <input id="nummer" placeholder="Telefonnummer">
    <div id="chat"></div>
    <input id="msg" placeholder="Nachricht">
    <button onclick="sendMsg()">Senden ðŸ˜Ž</button>
    <button onclick="insertEmoji()">ðŸ˜Ž</button>

    <script>
        let server = "http://127.0.0.1:5000";

        function insertEmoji() {
            document.getElementById("msg").value += "ðŸ˜Ž";
        }

        function sendMsg() {
            let name = document.getElementById("name").value;
            let nummer = document.getElementById("nummer").value;
            let msg = document.getElementById("msg").value;
            if (!msg || !name || !nummer) return;
            fetch(server + "/send", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ user: nummer, name: name, msg: msg })
            }).then(() => {
                document.getElementById("msg").value = "";
                loadChat();
            });
        }

        function loadChat() {
            fetch(server + "/get").then(r => r.json()).then(data => {
                let chat = data.map(m => <b>${m.name} (${m.user})</b>: ${m.msg}).join("<br>");
                document.getElementById("chat").innerHTML = chat;
                document.getElementById("chat").scrollTop = 99999;
            });
        }

        setInterval(loadChat, 1500);
        loadChat();
    </script>
</body>
</html>

